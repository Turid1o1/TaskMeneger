<!doctype html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ОПИРИ - Диспетчер задач</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div class="shell" id="app-root">
    <aside class="left-nav">
      <div class="brand">ОПИРИ</div>
      <a class="menu-link active" data-view="dashboard" href="#">Панель управления</a>
      <a class="menu-link" data-view="projects" href="#">Проекты</a>
      <a class="menu-link" data-view="tasks" href="#">Задачи</a>
      <a class="menu-link" data-view="calendar" href="#">Календарь</a>
      <a class="menu-link" data-view="users" href="#">Пользователи</a>
      <a class="menu-link" data-view="settings" href="#">Настройки</a>
      <a class="menu-link" href="/login.html">Выход</a>
      <div class="nav-user" id="current-user">—</div>
    </aside>

    <main class="workspace">
      <section class="view active" id="view-dashboard">
        <div class="header-row">
          <div>
            <h1>Диспетчер задач</h1>
            <div class="sub">Рабочая доска проекта</div>
          </div>
          <div class="toolbar">
            <button class="btn primary" data-view="task-editor">+ Новое задание</button>
            <button class="btn" data-view="tasks">Все задачи</button>
          </div>
        </div>

        <div class="kanban-grid">
          <article class="card-col"><h3>Надо сделать</h3><div id="todo-list"></div></article>
          <article class="card-col"><h3>В процессе</h3><div id="progress-list"></div></article>
          <article class="card-col"><h3>Завершено</h3><div id="done-list"></div></article>
        </div>
      </section>

      <section class="view" id="view-settings">
        <div class="header-row"><div><h1>Настройки</h1><div class="sub">Настройки открываются отдельным экраном</div></div></div>
        <div class="grid-2">
          <div class="info-box"><h3>Общие</h3><p>Язык, часовой пояс, формат даты</p></div>
          <div class="info-box"><h3>Безопасность</h3><p>2FA, политика пароля, лимит попыток, сессия</p></div>
          <div class="info-box"><h3>Уведомления</h3><p>Email, in-app, дайджест, просрочки</p></div>
          <div class="info-box"><h3>Пользователи</h3><p>Создание, редактирование, удаление</p></div>
        </div>
      </section>

      <section class="view" id="view-calendar">
        <div class="header-row"><div><h1>Календарь задач</h1><div class="sub">Февраль 2026</div></div></div>
        <div class="calendar-grid" id="calendar-grid"></div>
      </section>

      <section class="view" id="view-projects">
        <div class="header-row"><div><h1>Проекты</h1><div class="sub">Создание, редактирование, удаление</div></div></div>

        <div class="editor-box">
          <h3 id="project-editor-title">Создать проект</h3>
          <div class="grid-3">
            <div><label>Ключ</label><input id="project-key" placeholder="PRJ"></div>
            <div><label>Название</label><input id="project-name" placeholder="Название проекта"></div>
            <div><label>Куратор</label><select id="project-curator"></select></div>
          </div>
          <div class="row-actions">
            <button class="btn primary" id="save-project-btn">Сохранить</button>
            <button class="btn" id="reset-project-btn">Очистить</button>
            <span class="sub" id="project-editor-message"></span>
          </div>
        </div>

        <table class="table" id="projects-table">
          <thead><tr><th>ID</th><th>Ключ</th><th>Название</th><th>Куратор</th><th>Действия</th></tr></thead>
          <tbody></tbody>
        </table>
      </section>

      <section class="view" id="view-tasks">
        <div class="header-row"><div><h1>Задачи</h1><div class="sub">Исполнитель и куратор обязательны в каждой задаче</div></div></div>
        <table class="table" id="tasks-table">
          <thead><tr><th>ID</th><th>Ключ</th><th>Название</th><th>Тип</th><th>Статус</th><th>Приоритет</th><th>Исполнители</th><th>Куратор</th><th>Проект</th><th>Действия</th></tr></thead>
          <tbody></tbody>
        </table>
      </section>

      <section class="view" id="view-task-editor">
        <div class="header-row"><div><h1 id="task-editor-title">Создать задачу</h1><div class="sub">Редактирование и удаление поддерживаются</div></div></div>

        <div class="editor-box">
          <div class="grid-3">
            <div><label>Ключ</label><input id="task-key" placeholder="PRJ-100"></div>
            <div><label>Название</label><input id="task-title" placeholder="Название"></div>
            <div><label>Проект</label><select id="task-project"></select></div>
            <div><label>Тип</label><select id="task-type"><option>Task</option><option>Bug</option><option>Story</option><option>Epic</option></select></div>
            <div><label>Статус</label><select id="task-status"><option>To Do</option><option>In Progress</option><option>Review</option><option>Done</option></select></div>
            <div><label>Приоритет</label><select id="task-priority"><option>Low</option><option>Medium</option><option>High</option><option>Critical</option></select></div>
            <div><label>Куратор</label><select id="task-curator"></select></div>
            <div><label>Исполнители</label><select id="task-assignees" multiple></select></div>
            <div><label>Срок</label><input id="task-due-date" type="date"></div>
          </div>
          <div><label>Описание</label><textarea id="task-description" placeholder="Описание"></textarea></div>
          <div class="row-actions">
            <button class="btn primary" id="save-task-btn">Сохранить</button>
            <button class="btn" id="reset-task-btn">Очистить</button>
            <span class="sub" id="task-editor-message"></span>
          </div>
        </div>
      </section>

      <section class="view" id="view-users">
        <div class="header-row"><div><h1>Пользователи</h1><div class="sub">Редактирование и удаление пользователей</div></div></div>

        <div class="editor-box">
          <h3 id="user-editor-title">Редактирование пользователя</h3>
          <div class="grid-3">
            <div><label>Логин</label><input id="user-login"></div>
            <div><label>ФИО</label><input id="user-fullname"></div>
            <div><label>Должность</label><input id="user-position"></div>
            <div><label>Роль</label><select id="user-role"><option>Owner</option><option>Admin</option><option>Project Manager</option><option>Member</option><option>Guest</option></select></div>
          </div>
          <div class="row-actions">
            <button class="btn primary" id="save-user-btn">Сохранить</button>
            <button class="btn" id="reset-user-btn">Очистить</button>
            <a class="btn" href="/register.html">Новая регистрация</a>
            <span class="sub" id="user-editor-message"></span>
          </div>
        </div>

        <table class="table" id="users-table">
          <thead><tr><th>ID</th><th>Логин</th><th>ФИО</th><th>Должность</th><th>Роль</th><th>Статус</th><th>Действия</th></tr></thead>
          <tbody></tbody>
        </table>
      </section>
    </main>
  </div>

  <script src="/client.js"></script>
  <script>TaskFlowClient.initAppPage();</script>
</body>
</html>
